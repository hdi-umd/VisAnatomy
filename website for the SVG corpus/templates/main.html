{% extends 'base.html' %}

{% block main %}
<!-- Split up the screen into two portions for the faceted browising nav and the image grid displays -->
<div id="pagebody">    
    <!-- actual page content -->
    <div class="content">
        <div class="row">
            <!-- faceted browsing navigation -->
            <div class="col s3" style="position: fixed; top: 70px; left: 0px; bottom: 0px; overflow-y: auto;"> 
              <div id="browserFrom">
                <form action="#" id ="facetedbrowsingform">
                    <div class="criteriagroup">
                        <ul class="collapsible">
                            <!-- Visualization elements -->
                            <li>
                              <div class="collapsible-header">Visualization Elements</div>
                              <div class="collapsible-body">
                                <div class="row">
                                  <div class="col s6">
                                    <p>
                                      <label>
                                        <input type="checkbox" name="line" value="line" />
                                        <span >Line Graph</span>
                                      </label>
                                    </p>
                  
                                    <p>
                                        <label>
                                          <input type="checkbox" name="bar" value="bar"/>
                                          <span >Bar Chart</span>
                                        </label>
                                    </p>
                    
                                    <p>
                                        <label>
                                          <input type="checkbox" name="dot" value="dot"/>
                                          <span >Dot Plot</span>
                                        </label>
                                    </p>
                    
                                    <p>
                                        <label>
                                          <input type="checkbox" name="marimekko" value="marimekko"/>
                                          <span >Marimekko Chart</span>
                                        </label>
                                    </p>

                                    <p>
                                      <label>
                                        <input type="checkbox" name="arc" value="arc"/>
                                        <span >Arc</span>
                                      </label>
                                    </p>
                                    
                                    <p>
                                      <label>
                                        <input type="checkbox" name="grouped" value="grouped" />
                                        <span >Grouped Bar Chart</span>
                                      </label>
                                    </p>
                  
                                    <p>
                                        <label>
                                          <input type="checkbox" name="pie" value="pie"/>
                                          <span >Pie Chart</span>
                                        </label>
                                    </p>
                                    <p>
                                      <label>
                                        <input type="checkbox" name="stacked" value="stacked"/>
                                        <span >Stacked Bar Chart</span>
                                      </label>
                                    </p>
                                    <p>
                                      <label>
                                        <input type="checkbox" name="waterfall" value="waterfall"/>
                                        <span >Waterfall Chart</span>
                                      </label>
                                    </p>
                                    <p>
                                      <label>
                                        <input type="checkbox" name="scatterplot" value="scatterplot"/>
                                        <span >Scatterplot</span>
                                      </label>
                                    </p>
                                    <p>
                                      <label>
                                        <input type="checkbox" name="connected" value="connected"/>
                                        <span >Connected Scatterplot</span>
                                      </label>
                                    </p>
                                    <p>
                                      <label>
                                        <input type="checkbox" name="diverging" value="diverging"/>
                                        <span >Diverging Stacked Bar Chart</span>
                                      </label>
                                    </p>
                                    <p>
                                      <label>
                                        <input type="checkbox" name="waffle" value="waffle"/>
                                        <span >Waffle Chart</span>
                                      </label>
                                    </p>
                                    <p>
                                      <label>
                                        <input type="checkbox" name="diverging" value="diverging"/>
                                        <span >Donut Chart</span>
                                      </label>
                                    </p>
                                    <p>
                                      <label>
                                        <input type="checkbox" name="treemap" value="treemap"/>
                                        <span >Treemap</span>
                                      </label>
                                    </p>
                                    <p>
                                      <label>
                                        <input type="checkbox" name="area" value="area"/>
                                        <span >Area Chart</span>
                                      </label>
                                    </p>
                                    <p>
                                      <label>
                                        <input type="checkbox" name="bubble" value="bubble"/>
                                        <span >Bubble Chart</span>
                                      </label>
                                    </p>
                                    <p>
                                      <label>
                                        <input type="checkbox" name="stacked" value="stacked"/>
                                        <span >Stacked Area Chart</span>
                                      </label>
                                    </p>
                                    <p>
                                      <label>
                                        <input type="checkbox" name="calendar" value="calendar"/>
                                        <span >Calendar</span>
                                      </label>
                                    </p>
                                    <p>
                                      <label>
                                        <input type="checkbox" name="density" value="density"/>
                                        <span >Density Plot</span>
                                      </label>
                                    </p>
                                    <p>
                                      <label>
                                        <input type="checkbox" name="circle" value="circle"/>
                                        <span >Circle Packing</span>
                                      </label>
                                    </p>
                                    <p>
                                      <label>
                                        <input type="checkbox" name="connected" value="connected"/>
                                        <span >Connected Dot Plot</span>
                                      </label>
                                    </p>
                                  </div>
                                  <div class="col s6">
                                    <p>
                                      <label>
                                        <input type="checkbox" name="polar" value="polar"/>
                                        <span >Polar Area Chart</span>
                                      </label>
                                    </p>
                                    <p>
                                      <label>
                                        <input type="checkbox" name="radial" value="radial"/>
                                        <span >Radial Bar Chart</span>
                                      </label>
                                    </p>
                                    <p>
                                      <label>
                                        <input type="checkbox" name="radar" value="radar"/>
                                        <span >Radar Chart</span>
                                      </label>
                                    </p>
                                    <p>
                                      <label>
                                        <input type="checkbox" name="matrix" value="matrix"/>
                                        <span >Matrix Diagram</span>
                                      </label>
                                    </p>
                                    <p>
                                      <label>
                                        <input type="checkbox" name="box" value="box"/>
                                        <span >Box and Whisker Plot</span>
                                      </label>
                                    </p>
                                    <p>
                                      <label>
                                        <input type="checkbox" name="candlestick" value="candlestick"/>
                                        <span >Candlestick Chart</span>
                                      </label>
                                    </p>
                                    <p>
                                      <label>
                                        <input type="checkbox" name="venn" value="venn"/>
                                        <span >Venn Diagram</span>
                                      </label>
                                    </p>
                                    <p>
                                      <label>
                                        <input type="checkbox" name="stream" value="stream"/>
                                        <span >Stream Graph</span>
                                      </label>
                                    </p>
                                    <p>
                                      <label>
                                        <input type="checkbox" name="parallel" value="parallel"/>
                                        <span >Parallel Coordinates Plot</span>
                                      </label>
                                    </p>
                                    <p>
                                      <label>
                                        <input type="checkbox" name="kagi" value="kagi"/>
                                        <span >Kagi Chart</span>
                                      </label>
                                    </p>
                                    <p>
                                      <label>
                                        <input type="checkbox" name="spiral" value="spiral"/>
                                        <span >Spiral Plot</span>
                                      </label>
                                    </p>
                                    <p>
                                      <label>
                                        <input type="checkbox" name="parallels" value="parallels"/>
                                        <span >Parallel Sets</span>
                                      </label>
                                    </p>
                                    <p>
                                      <label>
                                        <input type="checkbox" name="bullet" value="bullet"/>
                                        <span >Bullet Chart</span>
                                      </label>
                                    </p>
                                    <p>
                                      <label>
                                        <input type="checkbox" name="range" value="range"/>
                                        <span >Range Chart</span>
                                      </label>
                                    </p>
                                    <p>
                                      <label>
                                        <input type="checkbox" name="heatmap" value="heatmap"/>
                                        <span >Heatmap</span>
                                      </label>
                                    </p>
                                    <p>
                                      <label>
                                        <input type="checkbox" name="geo" value="geo"/>
                                        <span >Geo Heatmap</span>
                                      </label>
                                    </p>
                                    <p>
                                      <label>
                                        <input type="checkbox" name="violin" value="violin"/>
                                        <span >Violin Plot</span>
                                      </label>
                                    </p>
                                    <p>
                                      <label>
                                        <input type="checkbox" name="word" value="word"/>
                                        <span >Word Cloud</span>
                                      </label>
                                    </p>
                                    <p>
                                      <label>
                                        <input type="checkbox" name="bump" value="bump"/>
                                        <span >Bump Chart</span>
                                      </label>
                                    </p>
                                    <p>
                                      <label>
                                        <input type="checkbox" name="composite" value="composite"/>
                                        <span >Composite</span>
                                      </label>
                                    </p>
                                  </div>
                                </div>
                              </div>
                            </li>
                          </ul>
                    </div>
                </form>
              </div>
            </div>
            <!-- search result image cards go here -->
            <div class="col s9" style="position: fixed; top: 75px; right: 0px; bottom: 0px; overflow-y: auto;">
              <!-- <span>Search Results....</span> -->
              
              <!-- TODO: submit user data -->
              <a href="{{url_for('submit')}}" style="float: right; display: none;" id="nextButton"><button class="btn waves-effect waves-light" type="submit" name="action">Next</button></a>
              <!-- Modal Trigger -->
              <a class="waves-effect waves-light btn modal-trigger" href="#bookmarkModal" style="float: right; margin-right: 2px;">Bookmarks</a>
              <!-- Modal Trigger -->
              <a class="waves-effect waves-light btn modal-trigger" href="#modal1" style="float: right; margin-right: 2px;">Instructions</a>

              <div id="selectedterms">
                  <div class="chips chips-initial"></div>
              </div>
              <div id="examplecards">
              </div>
            </div>
        </div>
      </div>

     <!-- Instructions Modal Structure -->
  <div id="modal1" class="modal modal-fixed-footer">
    <div class="modal-content">
      <!-- experiment task for the user -->
      <div class="flow-text">
        <h5>Instructions</h5>
          <p>
              Palm oil production has been at the forefront of climate talk as a major driver of deforestation. 
              This has led to drastic changes in consumer behavior as companies and people move away from consuming/using palm oil-based products. 
              But is this claim true? Is palm oil production any more destructive than other vegetable oil crops being produced? <br>
              You have been selected to create a visualization that will be submitted to the Iron Viz competition and have been provided with a dataset on: <br>
              <ol>
                  <li>The amount of land used to produce various vegetable crops</li>
                  <li>The expected yield for vegetable oil crops</li>
                  <li>The drivers for deforestation in Indoesia</li>
              </ol>
          </p>
          <p style="text-align: left;">Your task is to create a visualization that communicates two key insights: <br>
            <ul style="text-align: left;">
                <li style="list-style-type: disc !important">
                    <b><i>Only a small percentage of direct deforestation was driven by palm oil plantations. 
                        Infact most of the land replaced by palm oil plantations were previously logged forests or scrubland (land destroyed by fire or other natural elements)</i></b>
                </li>
                <li style="list-style-type: disc !important">
                    <b><i>Compared to other vegetable oil crops, Palm oil has higher yield per hectare of land. Hence requiring less land use to meet global demand.</i></b>
                </li>
            </ul>
          </p>
              
          Your visualization will be judged based on how novel your design is and how well you communicate the key insights to your audience.
      </div>
    </div>
    <div class="modal-footer">
      <a href="#!" class="modal-close waves-effect waves-green btn-flat">Close</a>
    </div>
  </div>

  <!-- Bookmarks Modal Structure -->
  <div id="bookmarkModal" class="modal modal-fixed-footer">
    <div class="modal-content">
      <!-- bookmarked views -->
      <div id="bkModalContent">
        
      </div>
    </div>
    <div class="modal-footer">
      <a href="#!" class="modal-close waves-effect waves-green btn-flat">Close</a>
    </div>
  </div>
  
  <script type="text/javascript">
   
    //set user details for logging purposes
    var userdetails= {{data|tojson}}
    
    var time =0;
    if ("{{ data.condition }}".includes('b')){
        time = 20
    }else{
        time = 35
    }
    console.log(time)
    //update timer clock
    document.getElementById("counter").style.display = "inline"
    //count down timer
    var currDate = new Date()
    var countDownDate = currDate.getTime() + time*60000
    var x = setInterval(function() {

    // Get today's date and time
    var now = new Date().getTime();

    // Find the distance between now and the count down date
    var distance = countDownDate - now;

    // Time calculations for hours, minutes and seconds
    var minutes = Math.floor((distance % (1000 * 60 * 60)) / (1000 * 60));
    var seconds = Math.floor((distance % (1000 * 60)) / 1000);

    // Display the result in the element with id="demo"
    document.getElementById("timer").innerHTML =  minutes + ":" + seconds;

    // If the count down is finished, write some text
    if (distance < 0) {
    clearInterval(x);
        document.getElementById("timer").innerHTML = "00:00";
        document.getElementById("timer").style.color ="red";
        document.getElementById("counter").style.color ="red";
        alert('You have exceeded the time for this section. Please click on the "Next" button')
    }
    }, 1000);
    setTimeout((d) =>{
        document.getElementById("nextButton").style.display = "inline"
    }, time*60000)
  </script>
</div>
{% endblock %}