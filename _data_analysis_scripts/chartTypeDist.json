{
  "$schema": "https://vega.github.io/schema/vega-lite/v5.json",
  "description": "Chart Type Counts and Percentages",
  "data": {
    "values": [
      {
        "Chart Type": "Line Graph",
        "Count": 40
      },
      {
        "Chart Type": "Area Chart",
        "Count": 28
      },
      {
        "Chart Type": "Bar Chart",
        "Count": 28
      },
      {
        "Chart Type": "Grouped Bar Chart",
        "Count": 27
      },
      {
        "Chart Type": "Heatmap",
        "Count": 27
      },
      {
        "Chart Type": "Bubble Chart",
        "Count": 26
      },
      {
        "Chart Type": "Scatterplot",
        "Count": 26
      },
      {
        "Chart Type": "Stacked Bar Chart",
        "Count": 26
      },
      {
        "Chart Type": "Box-and-whisker plot",
        "Count": 25
      },
      {
        "Chart Type": "Polar Area Chart",
        "Count": 25
      },
      {
        "Chart Type": "Pie Chart",
        "Count": 24
      },
      {
        "Chart Type": "Radar Chart",
        "Count": 24
      },
      {
        "Chart Type": "Diverging Stacked Bar Chart",
        "Count": 23
      },
      {
        "Chart Type": "Gantt Chart",
        "Count": 23
      },
      {
        "Chart Type": "Stacked Area Chart",
        "Count": 23
      },
      {
        "Chart Type": "Connected Dot Plot",
        "Count": 22
      },
      {
        "Chart Type": "Density plot",
        "Count": 22
      },
      {
        "Chart Type": "Donut Chart",
        "Count": 22
      },
      {
        "Chart Type": "Treemap",
        "Count": 22
      },
      {
        "Chart Type": "Waffle Chart",
        "Count": 22
      },
      {
        "Chart Type": "Bullet Chart",
        "Count": 21
      },
      {
        "Chart Type": "Bump Chart",
        "Count": 21
      },
      {
        "Chart Type": "Candlestick Chart",
        "Count": 21
      },
      {
        "Chart Type": "Circle Packing",
        "Count": 21
      },
      {
        "Chart Type": "Connected Scatterplot",
        "Count": 21
      },
      {
        "Chart Type": "Geo Heatmap",
        "Count": 21
      },
      {
        "Chart Type": "Marimekko Chart",
        "Count": 21
      },
      {
        "Chart Type": "Matrix Diagram",
        "Count": 21
      },
      {
        "Chart Type": "Range Chart",
        "Count": 21
      },
      {
        "Chart Type": "Stream Graph",
        "Count": 21
      },
      {
        "Chart Type": "Violin Plot",
        "Count": 21
      },
      {
        "Chart Type": "Waterfall Chart",
        "Count": 21
      },
      {
        "Chart Type": "Word Cloud",
        "Count": 21
      },
      {
        "Chart Type": "Bar Chart in Radial Layout",
        "Count": 20
      },
      {
        "Chart Type": "Calendar",
        "Count": 20
      },
      {
        "Chart Type": "Dot Plot",
        "Count": 20
      },
      {
        "Chart Type": "Kagi Chart",
        "Count": 20
      },
      {
        "Chart Type": "Parallel Coordinates Plot",
        "Count": 20
      },
      {
        "Chart Type": "Radial Bar Chart",
        "Count": 20
      },
      {
        "Chart Type": "Spiral Plot",
        "Count": 20
      },
      {
        "Chart Type": "Others",
        "Count": 28
      }
    ]
  },
  "transform": [
    {
      "calculate": "datum.Count / 946 * 100",
      "as": "Percentage"
    },
    {
      "calculate": "format(datum.Percentage, '.2f') + '%'",
      "as": "PercentageText"
    },
    {
      "window": [
        {
          "op": "lag",
          "field": "Percentage",
          "as": "PrevPercentage"
        }
      ],
      "sort": [{ "field": "Percentage", "order": "descending" }]
    }
  ],
  "mark": "bar",
  "encoding": {
    "x": {
      "field": "Chart Type",
      "type": "nominal",
      "sort": "",
      "axis": { "labelAngle": -45, "labelFontSize": 14, "titleFontSize": 16 }
    },
    "y": {
      "field": "Count",
      "type": "quantitative",
      "title": "Count",
      "axis": { "titleFontSize": 16, "labelFontSize": 14 }
    },
    "color": {
      "condition": {
        "test": "datum['Chart Type'] === 'Others'",
        "value": "#81C784"
      },
      "value": "#17BECF"
    }
  },
  "layer": [
    {
      "mark": "bar"
    },
    {
      "mark": {
        "type": "text",
        "align": "right",
        "baseline": "top",
        "dx": 8,
        "dy": 5,
        "fontSize": 14
      },
      "encoding": {
        "text": { "field": "Count", "type": "quantitative" },
        "color": { "value": "white" }
      }
    },
    {
      "mark": {
        "type": "text",
        "align": "left",
        "baseline": "middle",
        "dx": 0,
        "dy": -5,
        "angle": -45,
        "fontSize": 14
      },
      "encoding": {
        "text": { "field": "PercentageText", "type": "nominal" },
        "color": { "value": "black" },
        "opacity": {
          "condition": {
            "test": "datum.Percentage !== datum.PrevPercentage",
            "value": 1
          },
          "value": 0
        }
      }
    }
  ],
  "config": {
    "view": { "stroke": null },
    "axis": { "grid": false }
  }
}
